# 面试题 08.11. 硬币

### 	分析题目

​	`25分、10分、5分和1分`  我们可以认为具有四种物品，分别重量为25、10、5和1，（定义为物品数组nums[i]）而且这四种物品可以重复使用（完全背包）。因此考虑为用这四种物品放进背包，有多少种放法。而背包的容量则为n。

### 定义状态

`dp[i][j]`表示用前`i`种物品填充容量为`j`的背包具有的填充方式组合

### base case

- `i`为0时，表示用0中物品填充背包，那么不用物品填充背包的组合方式都为1。
- `j`为0的，表示背包容量为0的时候，那么背包为0，用任何物品填充的组合方式都为1。

### 状态转移

当我们选择第`i`个物品的时候：

1. 该物品的重量已经超出背包容量n不选择这个物品（该枚硬币的价值超出了需要的总额n），那么`dp[i][j]=dp[i-1][j]`，即当前硬币组合方式种数继承`dp[i-1][j]`的值（组合方式种数不变与前`i-1`个物品凑成价值n的组合方式种数相同）。
2. 若该物品的重量小于或等于背包容量，那么我们就需要考虑该物品后，与前`i-1`个物品能凑成价值n的组合方式的种数。
   1. 当我们选择这个物品的时候，需要考虑能选择多少件该物品。我们把它定义为`k`件，那么`0 < k < Math.floor(j / nums[i])`  （`nums[i]`表示第`i`件物品的重量）

#### 方程

```java
dp[i][j]=dp[i-1][j]+dp[i-1][j-k*nums[i]]
```

### 图表分析法

<img src="/Users/huangzhenyang/Library/Application Support/typora-user-images/image-20200331215806639.jpg" alt="image-20200331215806639"  />

这里注意一些边界点：如(1,5)、(1,10)等

#### 分析边界点

​	(1,15)，这里的流程是：已经算出了(0,15)为1，新增物品5进来的时候，显然背包的容量为15，大于该物品的价值，因为我们考虑加入背包，那么我们考虑能放多少个这个物品。`k=15/5=3`

根据转移方程以及k的大小可以得出下面三条公式：

1. `dp[1][15]+=dp[0][10]`

2. `dp[1][15]+=dp[0][5]`

3. `dp[1][15]+=dp[0][0]`

   ​	这里可以理解为，当我们选入价值为5的物品`nums[1]`时，那么这个5可以出现多少次呢？例如第一条公式的意思为：我们选择了`nums[1]`一个，那么剩下的背包容量为10，那么我们就取背包容量为10的最优解；以此类推，第二条公式，选择两个`nums[1]`，剩下的背包容量为5，那么我们就取背包容量为5的最优解。

那么这三种情况合起来 就是选入物品`nums[1]`的最优解（由三个子最优解组成的新的最优解）

### 优化

| n=10       | n=15            |
| ---------- | --------------- |
| 5 5        | 5 5 5           |
| 5 11111    | 5 5 11111       |
| 1111111111 | 5 1111111111    |
|            | 111111111111111 |

​	分析上表：n=10的时候，组合数为3；当n增加到15时（增加一个已有最大的元素的值），组合数+1。

根据以上分析我们可以优化转移方程为下：

```java
dp[i][j] = (dp[i][j] + dp[i][j - nums[i]])
```

​	因此我们可以省略第三个k循环。





